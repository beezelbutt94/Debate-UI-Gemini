<!DOCTYPE html>
<html>
  <head>
    <title>Gemini Suite</title>
    <link rel="stylesheet" href="index.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="importmap">
      {
        "imports": {
          "@google/genai": "https://esm.sh/@google/genai@^0.15.0",
          "marked": "https://esm.sh/marked@^15.0.7"
        }
      }
    </script>
    <script type="module" src="index.tsx"></script>
  </head>
  <body>
    <div class="app-container">
      <header>
        <div class="logo-container">
            <svg class="logo-icon" width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2L9 4.5V9.5L12 12L15 9.5V4.5L12 2Z" stroke="var(--accent-color)" stroke-opacity="0.7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M9 14.5L12 17L15 14.5"  stroke="var(--accent-color)" stroke-opacity="0.7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M12 22L9 19.5V14.5L12 12L15 14.5V19.5L12 22Z" stroke="var(--accent-color)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <h1 data-lang-key="appTitle">Gemini Suite</h1>
        </div>
        <div class="header-controls">
          <div class="language-selector-container">
            <label for="ui-language-selector" data-lang-key="interfaceLanguage">Interface:</label>
            <select id="ui-language-selector">
              <option value="en">English</option>
              <option value="bg">Български</option>
            </select>
          </div>
          <nav class="tabs">
              <button class="tab-button active" data-tab="debate">
                  <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
                  <span data-lang-key="tabAIDebate">AI Debate</span>
              </button>
              <button class="tab-button" data-tab="chat">
                  <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3.34a10 10 0 1 1-14.97 8.95L2 17l5.22-2.1A10 10 0 0 1 17 3.34z"></path></svg>
                  <span data-lang-key="tabDirectChat">Direct Chat</span>
              </button>
              <button class="tab-button" data-tab="live">
                  <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line></svg>
                  <span data-lang-key="tabLiveChat">Live Chat</span>
              </button>
          </nav>
        </div>
      </header>

      <main class="content">
        <!-- AI Debate Tab -->
        <div class="tab-content active" id="debate-container">
          <div class="debate-setup-container" id="debate-setup-container">
            <h2 id="debate-setup-step-1" data-lang-key="step1SelectChars">1. Select Two Characters</h2>
            <div id="character-search-controls" class="character-search-controls">
              <input type="search" id="character-search-input" data-lang-key-placeholder="searchCharsPlaceholder" placeholder="Search characters by name, role, bio...">
              <button id="randomize-characters-button">
                  <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8h.01"/><path d="M3 3h18v18H3z"/><path d="M12 16h.01"/><path d="M8 12h.01"/><path d="M12 12h.01"/><path d="M16 12h.01"/><path d="M12 8h.01"/><path d="M8 16h.01"/></svg>
                  <span data-lang-key="randomizeButton">Randomize</span>
              </button>
            </div>
            <div id="character-selection-grid" class="character-selection-grid">
              <!-- Character cards will be populated by JS -->
            </div>
            <div class="debate-controls">
              <div id="debate-lock-controls">
                  <h2 id="debate-setup-step-2" data-lang-key="step2LockChoices">2. Lock Your Choices</h2>
                  <button id="lock-characters-button" disabled>
                      <span data-lang-key="lockCharactersButton">Lock Characters</span>
                  </button>
              </div>
            </div>
          </div>
          <div id="debate-main-area" class="debate-main-area">
            <div id="debate-management-controls" hidden>
                <div id="debate-topic-controls">
                    <h2 id="debate-setup-step-3" data-lang-key="step3SetConditions">3. Set Conditions & Topic</h2>
                     <div class="debate-settings-row">
                        <div class="setting-item">
                            <label for="debate-mode-selector" data-lang-key="modeLabel">Mode:</label>
                            <select id="debate-mode-selector">
                                <option value="formal debate" data-lang-key="modeFormalDebate">Formal Debate</option>
                                <option value="casual discussion" data-lang-key="modeCasualDiscussion" selected>Casual Discussion</option>
                                <option value="panel interview" data-lang-key="modePanelInterview">Panel Interview</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label for="answer-length-selector" data-lang-key="lengthLabel">Length:</label>
                            <select id="answer-length-selector">
                                <option value="short">Short</option>
                                <option value="average" selected>Average</option>
                                <option value="long">Long</option>
                            </select>
                        </div>
                         <div class="setting-item">
                            <label for="debate-language-selector" data-lang-key="languageLabel">Language:</label>
                            <select id="debate-language-selector">
                                <option value="english" selected>English</option>
                                <option value="bulgarian">Български</option>
                            </select>
                        </div>
                    </div>
                    <input type="text" id="debate-topic-input" data-lang-key-placeholder="topicPlaceholder" placeholder="e.g., The ethics of artificial intelligence">
                    <button id="toggle-debate-button">
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        <span data-lang-key="startDebate">Start Debate</span>
                    </button>
                </div>
                <div class="debate-utility-buttons">
                    <button id="toggle-setup-button">
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m18 15-6-6-6 6"/></svg>
                        <span data-lang-key="hideSetup">Hide Setup</span>
                    </button>
                    <button id="change-characters-button">
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M21 21v-5h-5"/></svg>
                        <span data-lang-key="changeCharacters">Change Characters</span>
                    </button>
                    <button id="stop-voices-button" hidden>
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line></svg>
                        <span data-lang-key="stopVoices">Stop Voices</span>
                    </button>
                </div>
            </div>
             <div id="debate-participants-container" class="debate-participants-container" hidden>
                <!-- JS will populate this with character names and turn info -->
             </div>
             <div id="debate-chat-container" class="chat-container"></div>
          </div>
        </div>

        <!-- Direct Chat Tab -->
        <div class="tab-content" id="chat-container-wrapper">
          <div class="chat-header">
              <div class="model-selector-container">
                  <label for="direct-chat-personality-selector" data-lang-key="aiPersonalityLabel">AI Personality:</label>
                  <select id="direct-chat-personality-selector"></select>
              </div>
              <div class="model-selector-container">
                  <label for="model-selector" data-lang-key="chatModelLabel">Chat Model:</label>
                  <select id="model-selector">
                      <option value="gemini-2.5-flash">Flash (Fast)</option>
                      <option value="gemini-2.5-pro">Pro (Advanced)</option>
                  </select>
              </div>
              <div class="model-selector-container">
                  <label for="tts-voice-selector" data-lang-key="ttsVoiceLabel">TTS Voice:</label>
                  <select id="tts-voice-selector">
                      <!-- Voices populated by JS -->
                  </select>
              </div>
          </div>
          <div class="chat-container" id="direct-chat-container" aria-live="polite">
              <div class="welcome-message">
                  <h2 data-lang-key="welcomeDirectChat">Welcome to Direct Chat!</h2>
                  <p data-lang-key="welcomeDirectChatDesc">Start a conversation, attach a file, or use the audio recorder to talk to Gemini.</p>
                  <div class="suggestion-chips">
                      <button class="chip" data-lang-key="chipFunFact">"Tell me a fun fact"</button>
                      <button class="chip" data-lang-key="chipQuantum">"What is quantum computing?"</button>
                      <button class="chip" data-lang-key="chipPoem">"Write a poem about the ocean"</button>
                  </div>
              </div>
          </div>
          <div class="chat-form-container">
            <form class="chat-form">
              <div class="attachment-preview" id="attachment-preview-container" hidden>
                  <span id="attachment-icon"></span>
                  <span id="attachment-filename"></span>
                  <button type="button" id="remove-attachment" aria-label="Remove attachment">&times;</button>
              </div>
              <div class="input-row">
                  <div class="tool-menu-container">
                      <button type="button" id="tool-menu-button" aria-label="Open tools menu">
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/></svg>
                      </button>
                      <div id="tool-menu" class="tool-menu" hidden>
                          <button type="button" id="upload-file-button">
                            <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                            <span data-lang-key="uploadFile">Upload File</span>
                          </button>
                          <button type="button" id="toggle-search-button">
                            <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                            <span data-lang-key="searchWeb">Search Web: OFF</span>
                          </button>
                      </div>
                  </div>
                  <input type="file" id="file-input" hidden>
                  <textarea data-lang-key-placeholder="chatPlaceholder" placeholder="Enter your message..." required></textarea>
                  <button type="button" id="record-button" data-lang-key-aria-label="recordAudioAria" aria-label="Record audio">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line></svg>
                  </button>
                  <button type="submit" data-lang-key-aria-label="sendMessageAria" aria-label="Send message">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                    <span data-lang-key="sendButton">Send</span>
                  </button>
              </div>
            </form>
          </div>
        </div>
        
        <!-- Live Chat Tab -->
        <div class="tab-content" id="live-container">
            <div class="live-intro">
                <h2 data-lang-key="liveChatTitle">Live Conversation</h2>
                <p data-lang-key="liveChatDesc">Speak directly with Gemini and get real-time audio responses. This feature uses the Gemini 2.5 Flash Native Audio model.</p>
            </div>
            <div class="live-controls">
                <button id="live-connect-button" class="start-button">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                    <span data-lang-key="startConversation">Start Conversation</span>
                </button>
                <div class="model-selector-container">
                    <label for="live-chat-personality-selector" data-lang-key="aiPersonalityLabel">AI Personality:</label>
                    <select id="live-chat-personality-selector"></select>
                </div>
                <div id="live-status-container">
                    <div id="live-status-indicator" class="disconnected">
                        <span id="live-status-text" data-lang-key="statusDisconnected">DISCONNECTED</span>
                    </div>
                </div>
            </div>
            <div class="live-transcription-container">
                <div id="live-transcription-history" class="chat-container">
                     <div class="welcome-message">
                        <p data-lang-key="liveWelcome">Your conversation transcription will appear here.</p>
                    </div>
                </div>
            </div>
        </div>

      </main>
    </div>
    <div id="toast-container"></div>
  </body>
</html>